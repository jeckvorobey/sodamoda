<template>
  <li class="profile" v-if="active" :class="{ active: auth }">
    <a aria-label="profile" href="#" @click="showPopup">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M12 10.0001C12.7582 10.0001 13.4993 9.77526 14.1298 9.35406C14.7602 8.93285 15.2515 8.33416 15.5417 7.6337C15.8318 6.93324 15.9078 6.16247 15.7599 5.41886C15.612 4.67524 15.2469 3.99219 14.7108 3.45607C14.1747 2.91995 13.4916 2.55484 12.748 2.40692C12.0044 2.259 11.2336 2.33491 10.5331 2.62504C9.83268 2.91518 9.23398 3.40652 8.81275 4.03692C8.39153 4.66732 8.1667 5.40847 8.1667 6.16665C8.16786 7.18296 8.5721 8.15731 9.29073 8.87595C10.0094 9.5946 10.9837 9.99886 12 10.0001ZM12 3.33335C12.5604 3.33333 13.1082 3.4995 13.5742 3.81083C14.0402 4.12216 14.4033 4.56467 14.6178 5.08241C14.8323 5.60015 14.8884 6.16986 14.7791 6.7195C14.6697 7.26913 14.3999 7.77401 14.0036 8.17027C13.6074 8.56653 13.1025 8.83639 12.5528 8.94571C12.0032 9.05504 11.4335 8.99892 10.9158 8.78445C10.398 8.56999 9.9555 8.20681 9.64417 7.74084C9.33284 7.27488 9.16668 6.72706 9.1667 6.16665C9.16757 5.41548 9.46636 4.69533 9.99752 4.16417C10.5287 3.63301 11.2488 3.33423 12 3.33335ZM19.707 15.5915C17.6615 13.5503 14.8897 12.404 12 12.404C9.11027 12.404 6.33855 13.5503 4.293 15.5915L4 15.8845V21.0001H20V15.8845L19.707 15.5915ZM19 20.0001H5V16.303C5.0135 16.2906 5.1249 16.1807 5.1385 16.1686C6.98234 14.3948 9.44147 13.4039 12 13.4039C14.5585 13.4039 17.0177 14.3948 18.8615 16.1686C18.8752 16.1807 18.9865 16.2906 19 16.303V20.0001Z" fill="black"/>
        <path class="hover-background" d="M4.48047 20.5276V16.2869L5.1816 15.3288L6.75334 14.2237L8.95133 13.2905L12.4878 12.8115L17.1416 14.322L19.4614 16.2869V20.5276H4.48047Z" fill="black"/>
        <circle class="hover-background" cx="12.0015" cy="6.05542" r="3.08935" fill="black"/>
      </svg>
    </a>
  </li>
</template>

<script>
import global from "~/mixins/global";

export default {
  name: "Profile",
  mixins: [global],
  props: ['active'],
  computed: {
    auth(){
      return this.$store.getters['user/auth']
    }
  },
  methods: {
    async showPopup(){
      await this.$store.dispatch('user/fetchCheckAuth')
      if(!this.auth){
        this.viewType('auth')
      }
      else {
        await this.$router.push('/personal/profile')
      }
    },
  }
};
</script>
